(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){var n;return void 0===i&&("undefined"!=typeof window?(i=require("jquery"),n=window):(i=require("jquery")(e),n=e)),t(i,n),i}:t(jQuery,window)})(function(t,e,i){var n=function(e,i){this.element=e,this.settings=t.extend({},n.defaults,i),this.settings.fullPage=this.element.is("body"),this.init(),this.settings.start&&this.start()};n.defaults={overlay:i,zIndex:i,message:"Loading...",theme:"light",shownClass:"loading-shown",hiddenClass:"loading-hidden",stoppable:!1,start:!0,onStart:function(t){t.overlay.fadeIn(150)},onStop:function(t){t.overlay.fadeOut(150)},onClick:function(){}},n.setDefaults=function(e){n.defaults=t.extend({},n.defaults,e)},t.extend(n.prototype,{init:function(){this.isActive=!1,this.overlay=this.settings.overlay||this.createOverlay(),this.resize(),this.attachMethodsToExternalEvents(),this.attachOptionsHandlers()},createOverlay:function(){var e=t('<div class="loading-overlay loading-theme-'+this.settings.theme+'"><div class="loading-overlay-content">'+this.settings.message+"</div></div>").addClass(this.settings.hiddenClass).hide().appendTo("body"),i=this.element.attr("id");return i&&e.attr("id",i+"_loading-overlay"),e},attachMethodsToExternalEvents:function(){var i=this;i.element.on("loading.start",function(){i.overlay.removeClass(i.settings.hiddenClass).addClass(i.settings.shownClass)}),i.element.on("loading.stop",function(){i.overlay.removeClass(i.settings.shownClass).addClass(i.settings.hiddenClass)}),i.settings.stoppable&&i.overlay.on("click",function(){i.stop()}),i.overlay.on("click",function(){i.element.trigger("loading.click",i)}),t(e).on("resize",function(){i.resize()}),t(function(){i.resize()})},attachOptionsHandlers:function(){var t=this;t.element.on("loading.start",function(e,i){t.settings.onStart(i)}),t.element.on("loading.stop",function(e,i){t.settings.onStop(i)}),t.element.on("loading.click",function(e,i){t.settings.onClick(i)})},calcZIndex:function(){return this.settings.zIndex!==i?this.settings.zIndex:(parseInt(this.element.css("z-index"))||0)+1+this.settings.fullPage},resize:function(){var t=this,e=t.element,i=e.outerWidth(),n=e.outerHeight();this.settings.fullPage&&(n="100%",i="100%"),this.overlay.css({position:t.settings.fullPage?"fixed":"absolute",zIndex:t.calcZIndex(),top:e.offset().top,left:e.offset().left,width:i,height:n})},start:function(){this.isActive=!0,this.resize(),this.element.trigger("loading.start",this)},stop:function(){this.isActive=!1,this.element.trigger("loading.stop",this)},active:function(){return this.isActive},toggle:function(){this.active()?this.stop():this.start()},destroy:function(){this.overlay.remove()}});var s="jquery-loading";t.fn.loading=function(e){return this.each(function(){var o=t.data(this,s);o?e===i?o.start():"string"==typeof e?o[e].apply(o):t.data(this,s,new n(t(this),e)):e!==i&&"object"!=typeof e&&"start"!==e&&"toggle"!==e||t.data(this,s,new n(t(this),e))})},t.fn.Loading=function(e){var o=t(this).data(s);return o&&e===i||t(this).data(s,o=new n(t(this),e)),o},t.expr[":"].loading=function(e){var i=t.data(e,s);return!!i&&i.active()},t.Loading=n});var jLoading={list:{},option:{onStart:function(t){t.overlay.slideDown(400)},onStop:function(t){t.overlay.slideUp(400)},stoppable:!0,message:"数据加载中..."},show:function(t){t||(t="body"),this.list[t]?this.list[t]+=1:(this.list[t]=1,$(t).loading(this.option))},stop:function(t){t||(t="body"),this.list[t]&&(this.list[t]-=1),this.list[t]||(delete this.list[t],$(t).loading("stop"))}};